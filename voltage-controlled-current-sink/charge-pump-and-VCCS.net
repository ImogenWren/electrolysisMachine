* D:\KiCAD 6.0\KiCad6.0 PROJECTS\electrolysisMachine\voltage-controlled-current-sink\charge-pump-and-VCCS.asc
XU1 N012 N009 Vsupply 0 N010 level2 Avol=1Meg GBW=10Meg Slew=10Meg Ilimit=25m Rail=0 Vos=0 En=0 Enk=0 In=0 Ink=0 Rin=500Meg
V1 Vsupply 0 12
V2 N001 0 5
R1 N014 N009 10k
R2 N014 0 2
R3 Vsupply N007 1k
M1 N007 N011 N014 N014 NMOS
R4 N011 N010 10k
R5 N012 0 100
R6 N012 Vcontrol 100k
V3 Vcontrol 0 PULSE(0 5 0 0 0 1m 2m 0)
C1 0 N012 100µ
C2 0 N011 1µ
XU2 0 N006 NC_01 Vsupply Vocc N006 N008 Vsupply NE555
R7 Vsupply N008 1k
R8 N008 N006 10k
C7 0 N006 1n5
V4 Vocc 0 10
D3 Vsupply N002 1N5819
C8 N013 N002 10µ
C9 0 Vpump0 10µ
C10 N013 N003 10µ
D4 N002 Vpump0 1N5819
D5 Vpump0 N003 1N5819
D6 N003 Vpump1 1N5819
V5 PWM 0 PULSE(0 5 0 {t_edge} {t_edge} {(duty/f)-t_edge} {1/f} 20k) AC 5 1
C3 0 Vpump 100µ
C4 0 Vpump1 10µ
D1 Vpump1 N004 1N5819
D2 N004 Vpump2 1N5819
C5 N013 N004 10µ
R9 0 Vpump 1k
D7 Vpump2 N005 1N5819
D8 N005 Vpump 1N5819
C6 0 Vpump2 10µ
C11 N013 N005 10µ
R10 N013 PWM 220
.model D D
.lib C:\Users\dech3\AppData\Local\LTspice\lib\cmp\standard.dio
.model NMOS NMOS
.model PMOS PMOS
.lib C:\Users\dech3\AppData\Local\LTspice\lib\cmp\standard.mos
;dc V4 0 12 0.1
;step param duty 0.0 1.0 0.01
;.op
.tran 0 1 0 0.01
.param f=40k t_edge=1u duty=0.8
.lib NE555.sub
.lib UniversalOpAmp2.lib
.backanno
.end
