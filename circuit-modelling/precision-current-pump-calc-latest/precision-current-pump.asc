Version 4
SHEET 1 1504 1044
WIRE -4400 -1136 -4400 -1184
WIRE -4048 -1136 -4400 -1136
WIRE -3664 -1136 -4048 -1136
WIRE -4400 -1088 -4400 -1136
WIRE -4032 -1040 -4064 -1040
WIRE -4064 -1008 -4064 -1040
WIRE -4064 -1008 -4256 -1008
WIRE -4032 -1008 -4032 -1040
WIRE -3936 -1008 -4032 -1008
WIRE -3664 -1008 -3664 -1136
WIRE -3664 -1008 -3712 -1008
WIRE -4384 -976 -4416 -976
WIRE -4416 -960 -4528 -960
WIRE -4384 -960 -4384 -976
WIRE -4256 -960 -4256 -1008
WIRE -4256 -960 -4384 -960
WIRE -4048 -960 -4048 -1136
WIRE -4048 -960 -4064 -960
WIRE -3936 -944 -4144 -944
WIRE -4064 -928 -4064 -960
WIRE -4048 -928 -4064 -928
WIRE -4144 -896 -4144 -944
WIRE -4144 -896 -4160 -896
WIRE -4048 -896 -4048 -928
WIRE -4048 -896 -4064 -896
WIRE -3936 -880 -4400 -880
WIRE -3616 -880 -3712 -880
WIRE -4160 -864 -4160 -896
WIRE -4144 -864 -4160 -864
WIRE -4064 -864 -4064 -896
WIRE -4048 -864 -4064 -864
WIRE -3936 -816 -4048 -816
WIRE -3664 -816 -3712 -816
WIRE -3664 -752 -3664 -816
WIRE -4400 -720 -4400 -752
WIRE -4144 -720 -4144 -864
WIRE -4144 -720 -4400 -720
WIRE -4400 -656 -4400 -720
WIRE -4144 -624 -4144 -720
WIRE -3616 -624 -3616 -880
WIRE -3616 -624 -4144 -624
WIRE -4400 -544 -4400 -592
WIRE -4272 -512 -4272 -560
WIRE -4272 -400 -4272 -432
WIRE 624 -320 384 -320
WIRE -2880 -176 -2880 -192
WIRE -2736 -176 -2880 -176
WIRE -2336 -176 -2736 -176
WIRE -2880 -144 -2880 -176
WIRE -2736 -144 -2736 -176
WIRE 480 -144 480 -176
WIRE 624 -128 624 -320
WIRE 624 -128 512 -128
WIRE -48 -112 -48 -192
WIRE 96 -112 96 -160
WIRE 448 -112 416 -112
WIRE 624 -96 512 -96
WIRE -2336 -80 -2336 -176
WIRE 288 -80 256 -80
WIRE 384 -80 384 -320
WIRE 384 -80 368 -80
WIRE 416 -80 416 -112
WIRE 416 -80 384 -80
WIRE 480 -48 480 -80
WIRE -2736 -32 -2736 -64
WIRE -2400 -32 -2736 -32
WIRE 96 -16 96 -32
WIRE -2736 0 -2736 -32
WIRE -48 0 -48 -32
WIRE -2128 16 -2128 -16
WIRE -2080 16 -2128 16
WIRE -1920 16 -2016 16
WIRE -1888 16 -1920 16
WIRE -1776 16 -1776 -64
WIRE -1776 16 -1824 16
WIRE -1744 16 -1776 16
WIRE -1632 16 -1680 16
WIRE -1600 16 -1632 16
WIRE -1504 16 -1504 -64
WIRE -1504 16 -1536 16
WIRE -1440 16 -1504 16
WIRE -1328 16 -1376 16
WIRE -1280 16 -1328 16
WIRE -1184 16 -1184 -64
WIRE -1184 16 -1216 16
WIRE -1136 16 -1184 16
WIRE -1040 16 -1040 0
WIRE -1040 16 -1072 16
WIRE -1008 16 -1040 16
WIRE -896 16 -944 16
WIRE -784 16 -784 -80
WIRE -784 16 -896 16
WIRE -2880 48 -2880 -64
WIRE -2880 48 -3040 48
WIRE -2800 48 -2880 48
WIRE -1920 80 -1920 16
WIRE -1776 80 -1776 16
WIRE -1632 80 -1632 16
WIRE -1504 80 -1504 16
WIRE -1328 80 -1328 16
WIRE -1184 80 -1184 16
WIRE -1040 80 -1040 16
WIRE -784 80 -784 16
WIRE -896 96 -896 16
WIRE -16 112 -128 112
WIRE 256 112 256 -80
WIRE 256 112 64 112
WIRE -2336 128 -2336 16
WIRE -2080 128 -2336 128
WIRE 416 128 416 96
WIRE -2736 144 -2736 96
WIRE -2640 144 -2736 144
WIRE 256 144 256 112
WIRE 384 144 256 144
WIRE -2880 160 -2880 48
WIRE 624 160 624 -96
WIRE 624 160 448 160
WIRE 656 160 624 160
WIRE 752 160 736 160
WIRE 976 160 752 160
WIRE 992 160 976 160
WIRE -1616 176 -1648 176
WIRE -1312 176 -1344 176
WIRE -1024 176 -1056 176
WIRE 384 176 256 176
WIRE -2336 192 -2336 128
WIRE -1776 192 -1776 144
WIRE -1648 192 -1648 176
WIRE -1648 192 -1776 192
WIRE -1616 192 -1616 176
WIRE -1504 192 -1504 144
WIRE -1504 192 -1616 192
WIRE -1344 192 -1344 176
WIRE -1344 192 -1504 192
WIRE -1312 192 -1312 176
WIRE -1184 192 -1184 144
WIRE -1184 192 -1312 192
WIRE -1056 192 -1056 176
WIRE -1056 192 -1184 192
WIRE -1024 192 -1024 176
WIRE -896 192 -896 160
WIRE -896 192 -1024 192
WIRE -784 192 -784 160
WIRE -784 192 -896 192
WIRE -2736 208 -2736 144
WIRE -2640 208 -2640 144
WIRE -16 208 -128 208
WIRE 256 208 256 176
WIRE 256 208 64 208
WIRE 992 208 992 160
WIRE -1776 224 -1776 192
WIRE 416 224 416 192
WIRE -2736 304 -2736 288
WIRE -2640 304 -2640 272
WIRE -2640 304 -2736 304
WIRE -2336 304 -2336 272
WIRE -2336 304 -2640 304
WIRE -2080 304 -2080 128
WIRE -1920 304 -1920 144
WIRE -1920 304 -2080 304
WIRE -1632 304 -1632 144
WIRE -1632 304 -1920 304
WIRE -1328 304 -1328 144
WIRE -1328 304 -1632 304
WIRE -1040 304 -1040 144
WIRE -1040 304 -1328 304
WIRE 640 320 640 288
WIRE -2880 336 -2880 240
WIRE -2736 336 -2736 304
WIRE 752 336 752 160
WIRE 752 336 672 336
WIRE 992 336 992 288
WIRE 256 352 256 208
WIRE 304 352 256 352
WIRE 512 352 384 352
WIRE 608 352 512 352
WIRE 752 368 672 368
WIRE 640 400 640 384
WIRE -1392 496 -1392 448
WIRE 512 512 512 352
WIRE 752 512 752 368
WIRE 752 512 512 512
WIRE -1392 608 -1392 576
FLAG 416 224 0
FLAG 96 -16 0
FLAG 96 -160 Vsupply
FLAG 416 96 Vsupply
FLAG -128 208 Vcontrol
FLAG 992 336 0
FLAG -48 -192 Vcontrol
FLAG -48 0 0
FLAG 976 160 Iout
FLAG -4400 -544 0
FLAG -3664 -752 0
FLAG -2128 -16 Vsupply
FLAG -1776 224 0
FLAG -784 -80 Vpump
FLAG -1392 608 0
FLAG -1392 448 PWM
FLAG -1776 -64 Vpump0
FLAG -1504 -64 Vpump1
FLAG -1184 -64 Vpump2
FLAG -2880 -192 Vsupply
FLAG -2736 336 0
FLAG -2880 336 0
FLAG -3040 48 PWM
FLAG -128 112 0
FLAG 640 400 Vsupply
FLAG 640 288 0
FLAG 480 -48 0
FLAG 480 -176 Vsupply
DATAFLAG -80 208 ""
DATAFLAG 160 208 ""
DATAFLAG 160 112 ""
DATAFLAG 1152 240 "I(R6)"
DATAFLAG 864 160 ""
DATAFLAG 544 160 ""
DATAFLAG 480 352 ""
SYMBOL Opamps\\UniversalOpamp2 416 160 R0
SYMATTR InstName U1
SYMBOL voltage 96 -128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 27
SYMBOL res 752 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1.1
SYMBOL res 80 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 220k
SYMBOL res 80 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 220k
SYMBOL res 384 -96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 100
SYMBOL res 400 336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100
SYMBOL voltage -48 -128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 5
SYMBOL schottky -2080 32 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap -1904 144 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C8
SYMATTR Value 10µ
SYMBOL cap -1760 144 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C9
SYMATTR Value 10µ
SYMBOL cap -1616 144 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C10
SYMATTR Value 10µ
SYMBOL schottky -1888 32 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky -1744 32 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D5
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky -1600 32 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D6
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL voltage -1392 480 R0
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 5 1
SYMATTR InstName V5
SYMATTR Value 5
SYMBOL cap -880 160 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C3
SYMATTR Value 100µ
SYMBOL cap -1488 144 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C4
SYMATTR Value 10µ
SYMBOL schottky -1440 32 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky -1280 32 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap -1312 144 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C5
SYMATTR Value 10µ
SYMBOL res -768 176 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL schottky -1136 32 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D7
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky -1008 32 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D8
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap -1168 144 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C6
SYMATTR Value 10µ
SYMBOL cap -1024 144 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C11
SYMATTR Value 10µ
SYMBOL npn -2800 0 R0
SYMATTR InstName Q1
SYMBOL res -2864 256 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R13
SYMATTR Value 47k
SYMBOL res -2864 -48 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res -2720 304 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R12
SYMATTR Value 1.5k
SYMBOL res -2720 -48 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R14
SYMATTR Value 10k
SYMBOL cap -2624 272 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C12
SYMATTR Value 10µ
SYMBOL npn -2400 -80 R0
SYMATTR InstName Q2
SYMBOL res -2320 288 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R15
SYMATTR Value 500
SYMBOL res 976 192 R0
SYMATTR InstName R6
SYMATTR Value 1
SYMBOL Opamps\\UniversalOpamp2 640 352 R180
SYMATTR InstName U2
SYMBOL Opamps\\UniversalOpamp2 480 -112 M0
SYMATTR InstName U3
TEXT -368 416 Left 2 !;.ac lin\n;.DC V3 0 5 0.01
TEXT 1120 296 Left 2 !.step param R6 0 1000k 10000
TEXT -368 488 Left 2 !.op
